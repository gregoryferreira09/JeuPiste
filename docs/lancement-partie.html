<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Lancement de la Partie - Jeu de piste</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Polices -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">
  <!-- CSS global harmonisé -->
  <link rel="stylesheet" href="styles/style.css">
  <!-- Ajout pour masquer le contenu tant que pas chargé -->
  <style>
    body[data-loading="1"] .main-accueil { opacity: 0; pointer-events: none; }
    body[data-loading="0"] .main-accueil { opacity: 1; pointer-events: auto; transition: opacity 0.2s; }
  </style>
</head>
<body data-loading="1">
  <header>
    <h1 class="site-title">Lancement de la partie</h1>
  </header>
  <div class="center-wrapper">
    <main>
      <section class="main-accueil fadeIn" role="main" aria-live="polite">
        <div class="presentation-jeu" id="presentationJeu">
          <!-- Contenu statique pour Avalon (sera remplacé dynamiquement si besoin) -->
          <div class="titre-course" id="titreCourse">Avalon</div>
          <div class="texte-course" id="textePresentation">
            Moi, Merlin l'Enchanteur, vous convoque pour la plus noble des aventures : la quête du Saint-Graal.<br>
            Les temps sont sombres, et seul les plus dignes des chevaliers parmi vous pourrez retrouver le Graal sacré, source de sagesse et de paix pour le royaume.
          </div>
          <div class="objectif-course">
            <span class="objectif-label">Objectif&nbsp;:</span>
            <span class="objectif-text" id="objectifText">Rassemblez votre équipe, serrez les rangs… et courez, car les vents de la destinée soufflent sur votre route.</span>
          </div>
          <div class="regles-course" id="reglesCourse">
            <strong>Règles du jeu&nbsp;:</strong><br>
            Six quêtes vous sont proposées pour prouver votre valeur de nobles chevaliers. Sans cela n'espérez pas atteindre l'antre du dragon et encore moins lui dérober ce qu'il détient depuis [...]
          </div>
        </div>
        <div class="boutons-actions actions-bandeau">
          <a class="main-btn" id="demarrerBtn" href="personnages.html" style="pointer-events:none; opacity:0.6;">Disponible dans 30s</a>
          <button class="main-btn" id="btnRetourAccueil">Retour accueil</button>
        </div>
        <div class="info message" id="messageInfo"></div>
      </section>
    </main>
  </div>
  <footer class="footer">
    <p>© 2025 Jeu de piste. Tous droits réservés.</p>
    <a href="mentions-legales.html">Mentions légales</a>
  </footer>

  <!-- Fenêtre flottante confirmation retour accueil -->
  <div id="confirmationRetourAccueil" role="dialog" aria-modal="true" aria-labelledby="confirmationTitle" style="display:none;">
    <div class="main-accueil">
      <div class="modal-question" id="confirmationTitle">
        Voulez-vous vraiment quitter la partie et revenir à l’accueil ?
      </div>
      <div class="boutons-actions">
        <button id="confirmerRetourAccueilBtn" class="main-btn">Oui</button>
        <button id="annulerRetourAccueilBtn" class="main-btn">Non</button>
      </div>
    </div>
  </div>

  <!-- Loader visuel -->
  <div id="loader" aria-live="polite" style="display:none;">
    <div class="spinner"></div>
  </div>
  <!-- Toast feedback -->
  <div class="modal-toast" id="toast-message" role="alert" aria-live="assertive"></div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <!-- Initialisation Firebase AVANT toute utilisation -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyD-BxBu-4ElCqbHrZPM-4-6yf1-yWnL1bI",
      authDomain: "murder-party-ba8d1.firebaseapp.com",
      databaseURL: "https://murder-party-ba8d1-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "murder-party-ba8d1",
      storageBucket: "murder-party-ba8d1.firebasestorage.app",
      messagingSenderId: "20295055805",
      appId: "1:20295055805:web:0963719c3f23ab7752fad4",
      measurementId: "G-KSBMBB7KMJ"
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
  </script>

  <!-- Catalogue de lancements dynamiques -->
  <script src="JS/catalogue-lancements.js"></script>
  <!-- Script de lancement partie (gère injection dynamique et les boutons) -->
  <script src="JS/lancement-partie.js"></script>
</body>
</html>
